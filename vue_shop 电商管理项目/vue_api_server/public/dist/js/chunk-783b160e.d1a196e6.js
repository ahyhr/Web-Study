(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-783b160e"],{"0135":function(e,t,r){},"4c67":function(e,t,r){"use strict";r("de59")},b9ae:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"list"},[r("breadcrumb",{attrs:{titles:["商品管理","商品列表"]}}),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getGoodsList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getGoodsList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("添加商品")])],1)],1),r("goods-list-table",{attrs:{goodsList:e.goodsList}}),r("el-pagination",{attrs:{background:"","current-page":e.queryInfo.pagenum,"page-sizes":[2,5,10,15],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],a=r("99a5"),s=(r("6a61"),r("2fbc")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"goods-list-table"},[r("el-table",{attrs:{data:e.goodsList,border:"",stripe:""}},[r("el-table-column",{attrs:{align:"center",type:"index",label:"#"}}),r("el-table-column",{attrs:{"min-width":"300px",prop:"goods_name",label:"商品名称"}}),r("el-table-column",{attrs:{width:"110px",align:"center",prop:"goods_price",label:"商品价格(元)"}}),r("el-table-column",{attrs:{width:"110px",align:"center",prop:"goods_weight",label:"商品重量"}}),r("el-table-column",{attrs:{width:"170px",align:"center",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("addTimeFormat")(t.row.add_time))+" ")]}}])}),r("el-table-column",{attrs:{width:"120px",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button-group",[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.editGoods(t.row.goods_id)}}}),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.deleteGoods(t.row.goods_id)}}})],1)]}}])})],1),r("edit-goods-dialog",{ref:"editGoodsDialogRef",attrs:{goods_id:e.goods_id}})],1)},u=[],d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit-goods-dialog"},[r("el-dialog",{attrs:{title:"编辑商品",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},open:e.DialogOpen}},[r("el-form",{ref:"editGoodsFrom",attrs:{model:e.editGoodsFrom,rules:e.FromRules,"label-width":"90px","label-position":"left","status-icon":""}},[r("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[r("el-input",{model:{value:e.editGoodsFrom.goods_name,callback:function(t){e.$set(e.editGoodsFrom,"goods_name",t)},expression:"editGoodsFrom.goods_name"}})],1),r("el-form-item",{attrs:{label:"价格",prop:"goods_price"}},[r("el-input",{model:{value:e.editGoodsFrom.goods_price,callback:function(t){e.$set(e.editGoodsFrom,"goods_price",t)},expression:"editGoodsFrom.goods_price"}})],1),r("el-form-item",{attrs:{label:"数量",prop:"goods_number"}},[r("el-input",{model:{value:e.editGoodsFrom.goods_number,callback:function(t){e.$set(e.editGoodsFrom,"goods_number",t)},expression:"editGoodsFrom.goods_number"}})],1),r("el-form-item",{attrs:{label:"重量",prop:"goods_weight"}},[r("el-input",{model:{value:e.editGoodsFrom.goods_weight,callback:function(t){e.$set(e.editGoodsFrom,"goods_weight",t)},expression:"editGoodsFrom.goods_weight"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editGoods}},[e._v("确 定")])],1)],1)],1)},c=[],l=(r("e1d4"),r("de5d")),g={name:"editGoodsDialog",props:{goods_id:Number},data:function(){var e=function(e,t,r){if(/^\d+$/.test(t))return r();r(new Error("输入格式错误"))};return{dialogVisible:!1,editGoodsFrom:{},FromRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"},{validator:e,trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"},{validator:e,trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{editGoods:function(){var e=this;this.$refs.editGoodsFrom.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(l["h"])(e.goods_id,e.editGoodsFrom);case 4:if(o=t.sent,n=o.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("修改失败"));case 8:e.$message.success("修改成功"),e.$parent.$parent.$parent.getGoodsList(),e.dialogVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},DialogOpen:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["l"])(e.goods_id);case 2:if(r=t.sent,o=r.data,200===o.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品数据失败"));case 6:e.editGoodsFrom=o.data;case 7:case"end":return t.stop()}}),t)})))()}}},m=g,p=r("4ac2"),f=Object(p["a"])(m,d,c,!1,null,"2f41ece3",null),b=f.exports,h=r("caaf"),_=r.n(h),v={name:"goodsListTable",data:function(){return{goods_id:null}},props:{goodsList:{type:Array,default:function(){return[]}}},components:{editGoodsDialog:b},methods:{editGoods:function(e){this.goods_id=e,this.$refs.editGoodsDialogRef.dialogVisible=!0},deleteGoods:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("是否删除该参数?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(l["e"])(e);case 2:if(o=r.sent,n=o.data,200===n.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error("删除失败!"));case 6:t.$message.success("删除成功!"),t.$parent.$parent.getGoodsList();case 8:case"end":return r.stop()}}),r)})))).catch((function(){t.$message("已取消删除")}));case 1:case"end":return r.stop()}}),r)})))()}},filters:{addTimeFormat:function(e){return _.a.unix(e).format("YYYY-MM-DD HH:mm:ss")}}},w=v,G=(r("4c67"),Object(p["a"])(w,i,u,!1,null,"774b101d",null)),x=G.exports,y={name:"List",data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:5},goodsList:[],total:0}},components:{Breadcrumb:s["a"],goodsListTable:x},created:function(){this.getGoodsList()},methods:{addGoods:function(){this.$router.push("/goods/addGoods")},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoodsList()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoodsList()},getGoodsList:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["m"])(e.queryInfo);case 2:if(r=t.sent,o=r.data,200===o.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取商品列表失败"));case 6:e.goodsList=o.data.goods,e.total=o.data.total;case 8:case"end":return t.stop()}}),t)})))()}}},k=y,O=(r("c237"),Object(p["a"])(k,o,n,!1,null,"9ca7a50c",null));t["default"]=O.exports},c237:function(e,t,r){"use strict";r("0135")},de59:function(e,t,r){},de5d:function(e,t,r){"use strict";r.d(t,"k",(function(){return n})),r.d(t,"a",(function(){return a})),r.d(t,"j",(function(){return s})),r.d(t,"g",(function(){return i})),r.d(t,"d",(function(){return u})),r.d(t,"o",(function(){return d})),r.d(t,"c",(function(){return c})),r.d(t,"n",(function(){return l})),r.d(t,"i",(function(){return g})),r.d(t,"f",(function(){return m})),r.d(t,"m",(function(){return p})),r.d(t,"l",(function(){return f})),r.d(t,"h",(function(){return b})),r.d(t,"e",(function(){return h})),r.d(t,"b",(function(){return _}));var o=r("1bab");function n(e,t,r){return Object(o["a"])({url:"categories",params:{type:e,pagenum:t,pagesize:r}})}function a(e){return Object(o["a"])({url:"categories",method:"post",data:e})}function s(e){return Object(o["a"])({url:"categories/"+e})}function i(e,t){return Object(o["a"])({url:"categories/"+e,method:"put",data:{cat_name:t}})}function u(e,t){return Object(o["a"])({url:"categories/"+e,method:"delete"})}function d(e,t){return Object(o["a"])({url:"categories/"+e+"/attributes",params:{sel:t}})}function c(e,t,r){return Object(o["a"])({url:"categories/"+e+"/attributes",method:"post",data:{attr_name:t,attr_sel:r}})}function l(e,t,r){return Object(o["a"])({url:"categories/"+e+"/attributes/"+t,params:{attr_sel:r}})}function g(e,t,r,n,a){return Object(o["a"])({url:"categories/"+e+"/attributes/"+t,method:"put",data:{attr_name:r,attr_sel:n,attr_vals:a}})}function m(e,t){return Object(o["a"])({url:"categories/"+e+"/attributes/"+t,method:"delete"})}function p(e){return Object(o["a"])({url:"goods",params:e})}function f(e){return Object(o["a"])({url:"goods/"+e})}function b(e,t){return Object(o["a"])({url:"goods/"+e,method:"put",data:t})}function h(e){return Object(o["a"])({url:"goods/"+e,method:"delete"})}function _(e){return Object(o["a"])({url:"goods",method:"post",data:e})}}}]);